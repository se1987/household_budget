# 家計簿アプリ API 設計書

## 概要

本設計書は、Next.js を使用した家計簿アプリの API 仕様を定義します。このAPIは、REST アーキテクチャを基盤とし、家計簿アプリのデータ操作を行います。

### 1. リソース一覧

| リソース     | 説明                   |
| ------------ | ---------------------- |
| categories   | 費目に関する情報       |
| transactions | 収入・支出に関する情報 |

### 2. エンドポイント一覧

| エンドポイント      | 説明                   |
| ------------------- | ---------------------- |
| `/api/categories`   | 費目に関する情報       |
| `/api/transactions` | 収入・支出に関する情報 |

### 3. HTTP メソッドごとの設計内容

| リソース                | POST                 | GET                          | PUT                                   | DELETE                                |
| ----------------------- | -------------------- | ---------------------------- | ------------------------------------- | ------------------------------------- |
| `/api/transactions`     | 新規収入・支出を作成 | すべての収入・支出情報を取得 | すべての収入・支出を更新 (実装しない) | すべての収入・支出を削除 (実装しない) |
| `/api/transactions/:id` | エラー               | 特定の収入・支出情報を取得   | 特定の収入・支出を更新                | 特定の収入・支出を削除 (実装しない)   |
| `/api/categories`       | 新規費目を作成       | すべての費目情報を取得       | すべての費目を更新 (実装しない)       | すべての費目を削除 (実装しない)       |
| `/api/categories/:id`   | エラー               | 特定の費目情報を取得         | 特定の費目を更新 (実装しない)         | 特定の費目を削除 (実装しない)         |

### 4. リクエスト・レスポンス データ形式

リクエスト・レスポンスともにJSONファイル形式（以下具体例）

#### 4.1 POST, PUT リクエストデータ型　(Transaction)

```json
{
  "id": 1,
  "date": "2023-10-10",
  "type": "収入",
  "category": "給与",
  "amount": 50000,
  "description": "給料"
}
```

#### 4.2 GET リクエストに対するレスポンスデータ型　 (TransactionResponse)

```json
{
  "id": 1,
  "date": "2023-10-10",
  "type": "収入",
  "category": {
    "id": 1,
    "name": "給与"
  },
  "amount": 50000,
  "description": "給料"
}
```

#### 4.3 POST, PUT リクエストデータ型 (Category)

```json
{
  "category": "給与"
}
```

#### 4.4 GET リクエストに対するレスポンスデータ型 (CategoryResponse)

```json
{
  "id": 1,
  "name": "給与"
}
```

### 5. エラー処理の内容

| エラーコード | エラーメッセージ         | 説明                               |
| ------------ | ------------------------ | ---------------------------------- |
| 400          | バッドリクエスト         | リクエストデータが不正な場合       |
| 404          | リソースが見つかりません | 指定されたリソースが存在しない場合 |
| 500          | サーバーエラー           | サーバー側のエラーが発生した場合   |

### 6. API 設計に関する詳細

## /api/transactions エンドポイント

| HTTP メソッド | 説明                              | リクエストデータ形式 | レスポンスデータ形式    |
| ------------- | --------------------------------- | -------------------- | ----------------------- |
| GET           | すべての収入・支出情報を取得      | なし                 | `TransactionResponse[]` |
| POST          | 新規収入・支出を作成              | `Transaction`        | `TransactionResponse`   |
| PUT           | すべての収入・支出を更新 (未実装) | `Transaction[]`      | `TransactionResponse[]` |
| DELETE        | すべての収入・支出を削除 (未実装) | なし                 | 204 No Content          |

## /api/transactions/:id エンドポイント

| HTTP メソッド | 説明                            | リクエストパラメータ  | リクエストデータ形式 | レスポンスデータ形式  |
| ------------- | ------------------------------- | --------------------- | -------------------- | --------------------- |
| GET           | 特定の収入・支出情報を取得      | `id` (収入・支出のID) | なし                 | `TransactionResponse` |
| POST          | エラー                          | `id` (収入・支出のID) | エラー               | エラー                |
| PUT           | 特定の収入・支出を更新          | `id` (収入・支出のID) | `Transaction`        | `TransactionResponse` |
| DELETE        | 特定の収入・支出を削除 (未実装) | `id` (収入・支出のID) | なし                 | 204 No Content        |

### /api/categories エンドポイント

| HTTP メソッド | 説明                        | リクエストデータ形式 | レスポンスデータ形式 |
| ------------- | --------------------------- | -------------------- | -------------------- |
| GET           | すべての費目情報を取得      | なし                 | `Category[]`         |
| POST          | 新規費目を作成              | `name` (費目名)      | `Category`           |
| PUT           | すべての費目を更新 (未実装) | `Category[]`         | `Category[]`         |
| DELETE        | すべての費目を削除 (未実装) | なし                 | 204 No Content       |

### /api/categories/:id エンドポイント

| HTTP メソッド | 説明                      | リクエストパラメータ | リクエストデータ形式 | レスポンスデータ形式 |
| ------------- | ------------------------- | -------------------- | -------------------- | -------------------- |
| GET           | 特定の費目情報を取得      | `id` (費目のID)      | なし                 | `Category`           |
| POST          | エラー                    | `id` (費目のID)      | エラー               | エラー               |
| PUT           | 特定の費目を更新 (未実装) | `id` (費目のID)      | `Category`           | `Category`           |
| DELETE        | 特定の費目を削除 (未実装) | `id` (費目のID)      | なし                 | 204 No Content       |

### 7. その他

- すべてのエンドポイントはJSON形式でレスポンスを返す
- エラーが発生した場合、エラーコードとエラーメッセージを含むJSON形式でレスポンスを返す
- APIドキュメントを整備し、開発者が利用しやすいようにする
